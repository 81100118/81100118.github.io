System.register("chunks:///_virtual/AppStart.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameNetMgr.ts","./msgProcessor.ts","./Net.ts","./UserMgr.ts"],(function(t){"use strict";var e,r,n,o,s,c,i,a,u;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,o=t.director,s=t.Component},function(t){c=t.gameNetMgr},function(t){i=t.msgProcessor},function(t){a=t.Net},function(t){u=t.UserMgr}],execute:function(){var g;r._RF.push({},"6151eDWagpL8ZgvTvUqWDgW","AppStart",void 0);var p=n.ccclass;n.property,t("AppStart",p("AppStart")(g=function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var n=r.prototype;return n.onLoad=function(){globalThis._net=new a,globalThis._msgProcessor=new i,globalThis._userMgr=new u,globalThis._gameNetMgr=new c,o.loadScene("login")},n.start=function(){},n.update=function(t){},r}(s))||g);r._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MyHandMgr.ts","./RiverMgr.ts","./MyHandTile.ts"],(function(e){"use strict";var i,n,t,o,s,r,a,d,l,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,a=e.Component},function(e){d=e.MyHandMgr},function(e){l=e.RiverMgr},function(e){c=e.MyHandTile}],execute:function(){var u,g,f,h,y,m,M;s._RF.push({},"dc819VqfjhHrJ3aSrAbjzxZ","Game",void 0);var p=r.ccclass,T=r.property;e("Game",(u=p("Game"),g=T({type:d}),f=T({type:l}),u((m=i((y=function(e){function i(){for(var i,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return i=e.call.apply(e,[this].concat(s))||this,t(i,"myHandMgr",m,o(i)),t(i,"riverMgr",M,o(i)),i.gameInfo=void 0,i.justDiscarded=!1,i}n(i,e);var s=i.prototype;return s.onLoad=function(){this.init(),this.initEventHandlers()},s.start=function(){},s.update=function(e){},s.init=function(){this.justDiscarded=!1},s.initEventHandlers=function(){var e=this;globalThis._gameNetMgr.setDataEventHandler(this.node),this.node.on("game_begin",(function(){e.gameInfo=globalThis._gameNetMgr.gameInfo,globalThis._msgProcessor.dequeueAndProcessNextMsg()})),this.node.on("kyoku_begin",(function(){console.log("kyoku begin"),e.initMyHand(e.gameInfo.kyokuInfo.playersStatus[e.gameInfo.seat].hand),e.riverMgr.initRiver(),globalThis._msgProcessor.dequeueAndProcessNextMsg()})),this.node.on("draw_tile",(function(i){console.log("draw tile",i),e.onDrawTile(i)})),this.node.on("discard_tile",(function(i){console.log("discard tile",i),e.onDiscardTile(i)})),this.node.on("ryuukyoku",(function(i){console.log("ryuukyoku",i),e.riverMgr.passDiscardedTile(),e.justDiscarded=!1,globalThis._msgProcessor.dequeueAndProcessNextMsg()}))},s.onGameBegin=function(){this.init()},s.initMyHand=function(e){this.myHandMgr.initHand(e)},s.onDrawTile=function(e){this.justDiscarded&&(this.riverMgr.passDiscardedTile(),this.justDiscarded=!1),e.who===this.gameInfo.seat?(this.myHandMgr.drawTile(e.tile),globalThis._msgProcessor.dequeueAndProcessNextMsg()):setTimeout((function(){globalThis._msgProcessor.dequeueAndProcessNextMsg()}),300)},s.onDiscardTile=function(e){e.who===this.gameInfo.seat&&this.myHandMgr.discardTile(e.tile,e.isTsumogiri);var i=(e.who-this.gameInfo.seat+4)%4;this.riverMgr.discardTile(e.tile,i),this.justDiscarded=!0},s.onHandTileClicked=function(e){if(this.gameInfo.kyokuInfo.whosTurn===this.gameInfo.seat&&("after_draw"===this.gameInfo.kyokuInfo.playerState||"after_furo"===this.gameInfo.kyokuInfo.playerState)){var i=e.target.getComponent(c).tileCode;globalThis._net.sendDict({tag:"discard",tile:i})}},s.onButtonClicked=function(e){this.initMyHand([0,4,8,12,16,20,24,28,32,36,40,44,48])},s.onModifyButtonClicked=function(e){this.myHandMgr.modifyHandTile(this.myHandMgr.node.children[0],135)},s.onDeleteButtonClicked=function(e){this.myHandMgr.deleteHandTile(this.myHandMgr.node.children[0])},s.onOKButtonClicked=function(e){globalThis._net.sendDict({tag:"ok"})},i}(a)).prototype,"myHandMgr",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(y.prototype,"riverMgr",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=y))||h));s._RF.pop()}}}));

System.register("chunks:///_virtual/gameNetMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,a,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,n=t._decorator,o=t.Component}],execute:function(){var r;a._RF.push({},"022fff6AW5OlLHAyJxxaMLZ","gameNetMgr",void 0);var i=n.ccclass;n.property,t("gameNetMgr",i("gameNetMgr")(r=function(t){function a(){for(var e,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).gameInfo=void 0,e.dataEventHandler=void 0,e}e(a,t);var n=a.prototype;return n.onLoad=function(){},n.start=function(){},n.update=function(t){},n.setDataEventHandler=function(t){this.dataEventHandler=t},n.dispatchEvent=function(t,e){this.dataEventHandler&&this.dataEventHandler.emit(t,e)},n.onGameBegin=function(t){this.gameInfo={playersInfo:t.playersInfo,seat:t.seat,currentKyokuIndex:-1,kyokuInfo:null},this.dataEventHandler.emit("game_begin")},n.onKyokuBegin=function(t){for(var e={kyoku:t.kyoku,kyoutaku:0,oya:t.oya,doraIndicators:t.doraIndicators,playersStatus:[],whosTurn:t.oya,playerState:"none"},a=0;a<3;a++){var n={hand:a===this.gameInfo.seat?t.hand:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],river:[],furos:[],remaining:t.remaining[a],riichied:!1,score:0};e.playersStatus.push(n)}this.gameInfo.kyokuInfo=e,this.dataEventHandler.emit("kyoku_begin")},n.onDrawTile=function(t){var e=t.who;this.gameInfo.kyokuInfo.whosTurn=e,this.gameInfo.kyokuInfo.playerState="after_draw";var a=-1;void 0!==t.tile&&(a=t.tile),this.gameInfo.kyokuInfo.playersStatus[e].hand.push(a),this.dataEventHandler.emit("draw_tile",t)},n.onDiscardTile=function(t){var e=t.who,a=t.tile,n=t.isTsumogiri?1:0;this.gameInfo.kyokuInfo.playerState="after_discard",this.gameInfo.kyokuInfo.playersStatus[e].river.push({tile:a,how:n}),this.dataEventHandler.emit("discard_tile",t)},n.onRyuukyoku=function(t){this.dataEventHandler.emit("ryuukyoku",t)},a}(o))||r);a._RF.pop()}}}));

System.register("chunks:///_virtual/Lobby.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,a,r,n,i,l,o,p,y,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,o=e.Node,p=e.Label,y=e.director,s=e.Component}],execute:function(){var u,b,c,d,g,h,m,f,L,v,_;i._RF.push({},"970b9ry2vpEtJMYpYxyiXhb","Lobby",void 0);var C=l.ccclass,N=l.property;e("Lobby",(u=C("Lobby"),b=N({type:o}),c=N({type:o}),d=N({type:o}),g=N({type:o}),u((f=t((m=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,r(t,"readyButton",f,n(t)),r(t,"playerNameLabel",L,n(t)),r(t,"playerTeamLabel",v,n(t)),r(t,"playerStatusLabel",_,n(t)),t.ready=void 0,t}a(t,e);var i=t.prototype;return i.onLoad=function(){this.ready=!1,this.playerNameLabel.getComponent(p).string=globalThis._userMgr.playerName,this.playerNameLabel.getComponent(p).string=globalThis._userMgr.playerName},i.start=function(){y.preloadScene("game")},i.update=function(e){},i.onReadyButtonClicked=function(e){globalThis._net.sendDict({tag:"lobby_ready",ready:!this.ready})},i.onReady=function(){this.playerStatusLabel.getComponent(p).string="已准备",this.ready=!0},i.onCancelReady=function(){this.playerStatusLabel.getComponent(p).string="未准备",this.ready=!1},t}(s)).prototype,"readyButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(m.prototype,"playerNameLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(m.prototype,"playerTeamLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(m.prototype,"playerStatusLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=m))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/LoginClient.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,o,i,c,r,a;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Button,c=t.EditBox,r=t.Label,a=t.Component}],execute:function(){var l;e._RF.push({},"84d73HnVzVCrLSf/STNmIIz","LoginClient",void 0);var s=o.ccclass;o.property,t("LoginClient",s("LoginClient")(l=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.start=function(){},o.update=function(t){},o.onLoginButtonClicked=function(t){var n=this.node.getChildByName("LoginButton").getComponent(i);n.interactable=!1;var e=this.node.getChildByName("IDEditBox").getComponent(c).string.trim();globalThis._net.connect((function(){globalThis._net.sendDict({tag:"login",id:e})}),(function(){n.interactable=!0}))},o.onFastLoginButtonClicked=function(t){var n=t.target.getChildByName("Label").getComponent(r).string;globalThis._net.connect((function(){globalThis._net.sendDict({tag:"login",id:n})}))},e}(a))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./LoginClient.ts","./Net.ts","./UserMgr.ts","./AppStart.ts","./Game.ts","./Lobby.ts","./MyHandMgr.ts","./MyHandTile.ts","./RiverMgr.ts","./RiverTile.ts","./gameNetMgr.ts","./msgProcessor.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/msgProcessor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Lobby.ts"],(function(e){"use strict";var t,s,o,n,a,i,r;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy,o=e._decorator,n=e.director,a=e.Button,i=e.Component},function(e){r=e.Lobby}],execute:function(){var g;s._RF.push({},"e7fc9CFjsJL9YkUfDeAuno1","msgProcessor",void 0);var c=o.ccclass;e("msgProcessor",c("msgProcessor")(g=function(e){function s(){for(var t,s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this)._mq=[],t}t(s,e);var o=s.prototype;return o.enqueueMsg=function(e){this._mq.push(e),1===this._mq.length&&this._processFirstMsg()},o._processFirstMsg=function(){var e=this;if(0!==this._mq.length){var t=this._mq[0],s=!1;if(console.log("processing message:"+JSON.stringify(t)),"login"===t.tag)globalThis._userMgr.onLogin(t.data),n.loadScene("lobby",(function(){e.dequeueAndProcessNextMsg()}));else if("login_error"===t.tag){var o=n.getScene();if("login"===o.name)o.getChildByName("Canvas").getChildByName("LoginButton").getComponent(a).interactable=!0;s=!0}else if("lobby_ready"===t.tag){var i=n.getScene();if("lobby"===i.name)t.data.status?i.getChildByName("Canvas").getComponent(r).onReady():i.getChildByName("Canvas").getComponent(r).onCancelReady();s=!0}else"game_begin"===t.tag?n.loadScene("game",(function(){globalThis._gameNetMgr.onGameBegin(t.data)})):"init"===t.tag?globalThis._gameNetMgr.onKyokuBegin(t.data):"draw"===t.tag?globalThis._gameNetMgr.onDrawTile(t.data):"discard"===t.tag?globalThis._gameNetMgr.onDiscardTile(t.data):"ryuukyoku"===t.tag?globalThis._gameNetMgr.onRyuukyoku(t.data):(console.error("unexpected message:"+JSON.stringify(t)),s=!0);s&&this.dequeueAndProcessNextMsg()}},o.dequeueAndProcessNextMsg=function(){this._mq.length>0&&(this._mq.shift(),this._processFirstMsg())},o.start=function(){},o.update=function(e){},s}(i))||g);s._RF.pop()}}}));

System.register("chunks:///_virtual/MyHandMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MyHandTile.ts"],(function(t){"use strict";var e,n,i,o,r,a,s,l,d,h,c,f,p,u,g,m,v,C,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,s=t._decorator,l=t.Prefab,d=t.resources,h=t.SpriteAtlas,c=t.Sprite,f=t.tween,p=t.Vec3,u=t.instantiate,g=t.EventHandler,m=t.Button,v=t.NodeEventType,C=t.Component},function(t){y=t.MyHandTile}],execute:function(){var w,T,H,M,D;a._RF.push({},"0c9a3Bh3GpG/YPxIL5MqWwX","MyHandMgr",void 0);var _=s.ccclass,b=s.property;t("MyHandMgr",(w=_("MyHandMgr"),T=b({type:l}),w((D=e((M=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"handTilePrefab",D,o(e)),e._frames=new Array(40),e.width=60,e.height=90,e.drawTileOffset=5,e.canDiscard=!1,e}n(e,t);var a=e.prototype;return a.onLoad=function(){var t=this;console.log("begin loading hand tiles"),d.load("textures/tiles/myhand",h,(function(t,e,n){console.log(t,e,n)}),(function(e,n){for(var i=0;i<40;++i){var o=n.getSpriteFrame("tile_"+String(i));t._frames[i]=o}console.log("complete loading hand tiles")}))},a.start=function(){},a.update=function(t){},a.initHand=function(t){this.node.removeAllChildren();for(var e=0;e<t.length;e++){var n=t[e],i=this.newHandTile(n);i.getComponent(y).pos=e,i.setPosition(this.width*e,0)}this.sortHand(),this.setCanDiscard(!1)},a.drawTile=function(t){var e=this,n=this.newHandTile(t),i=this.node.children.length;n.getComponent(y).pos=i-1,n.setPosition(this.width*(i-1)+this.drawTileOffset,1.5*this.height),n.getComponent(c).color.set(255,255,255,0);f().target(n.getComponent(c)).to(.1,{color:{r:255,g:255,b:255,a:255}}).start(),f().target(n).to(.2,{position:new p(this.width*(i-1)+this.drawTileOffset,0,0)}).call((function(){e.setCanDiscard(!0)})).start()},a.newHandTile=function(t){var e=this;console.log("newhandtile");var n=u(this.handTilePrefab);n.getComponent(y).tileCode=t;var i=Math.floor(t/4/9),o=Math.floor(t/4)%9+1;5==o&&i<3&&t%4==0&&(o=0);var r=this._frames[10*i+o];n.getComponent(c).spriteFrame=r;var a=new g;return a.target=this.node.parent.parent,a.component="Game",a.handler="onHandTileClicked",n.getComponent(m).clickEvents[0]=a,n.on(v.MOUSE_ENTER,(function(){var t;t=e.getCanDiscard()?e._frames[30]:null,n.getChildByName("mask").getComponent(c).spriteFrame=t,n.getChildByName("mask").active=!0})),n.on(v.MOUSE_LEAVE,(function(){n.getChildByName("mask").active=!1})),this.node.addChild(n),n},a.modifyHandTile=function(t,e){t.getComponent(y).tileCode=e;var n=Math.floor(e/4/9),i=Math.floor(e/4)%9+1;5==i&&n<3&&e%4==0&&(i=0);var o=this._frames[10*n+i];t.getComponent(c).spriteFrame=o},a.discardTile=function(t,e){this.setCanDiscard(!1);var n=this.findNodeByTileCode(t);n&&(this.deleteHandTile(n),e||this.sortHand(!0))},a.deleteHandTile=function(t){t.removeFromParent(),t.destroy()},a.sortHand=function(t){console.log(this);for(var e=this.node.children.length,n=new Array(e),i=0;i<e;i++)n[i]=[this.node.children[i].getComponent(y).tileCode,i];n.sort((function(t,e){return t[0]-e[0]}));for(var o=0;o<e;o++){var r=this.node.children[n[o][1]],a=r.getComponent(y).pos,s=o;r.getComponent(y).pos=s,t&&n[o][1]===e-1&&s!==e-1?f().target(r).by(.05,{position:new p(0,this.height,0)}).to(.15,{position:new p(this.width*s,this.height,0)}).to(.1,{position:new p(this.width*s,0,0)}).start():a!==s&&f().target(r).to(.2,{position:new p(this.width*s,0,0)},{easing:"quadInOut"}).call((function(){})).start()}},a.findNodeByTileCode=function(t){for(var e,n=r(this.node.children);!(e=n()).done;){var i=e.value;if(i.getComponent(y).tileCode===t)return i}return null},a.getCanDiscard=function(){return this.canDiscard},a.setCanDiscard=function(t){this.canDiscard=t},e}(C)).prototype,"handTilePrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=M))||H));a._RF.pop()}}}));

System.register("chunks:///_virtual/MyHandTile.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,o,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Component}],execute:function(){var l,s,u;o._RF.push({},"f48455SjexI47qBxw3dVHRo","MyHandTile",void 0);var p=a.ccclass,d=a.property;e("MyHandTile",p("MyHandTile")((u=t((s=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"tileCode",u,n(t)),t.pos=0,t}r(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){},t}(c)).prototype,"tileCode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=s))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/Net.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(s){"use strict";var o,t,e,n;return{setters:[function(s){o=s.inheritsLoose},function(s){t=s.cclegacy,e=s._decorator,n=s.Component}],execute:function(){var c;t._RF.push({},"0b7a2GCtVtPqaxgcqgVVcv2","Net",void 0);var r=e.ccclass;e.property,s("Net",r("Net")(c=function(s){function t(){for(var o,t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(o=s.call.apply(s,[this].concat(e))||this).ws=void 0,o}o(t,s);var e=t.prototype;return e.connect=function(s,o){!this.ws||this.ws.CLOSED?(this.ws=new WebSocket("ws://localhost:3000"),this.ws.onopen=function(){console.log("on open"),s&&s()},this.ws.onmessage=function(s){var o=s.data;console.log("recv: "+o);try{var t=JSON.parse(o),e={tag:t.tag,isProcessing:!1,data:t};globalThis._msgProcessor.enqueueMsg(e)}catch(s){console.error("on message error:",s)}},this.ws.onerror=function(s){console.log("websocket on error")},this.ws.onclose=function(s){o&&o()}):(console.log("cannot open websocket because the current status is not CLOSED"),this.ws.OPEN&&s&&s())},e.send=function(s){this.ws&&this.ws.OPEN&&(console.log("send:",s),this.ws.send(s))},e.sendDict=function(s){this.send(JSON.stringify(s))},t}(n))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/RiverMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RiverTile.ts"],(function(e){"use strict";var i,t,r,s,o,l,n,a,d,c,u,f,h,g,v;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,n=e.Prefab,a=e.resources,d=e.SpriteAtlas,c=e.instantiate,u=e.Sprite,f=e.tween,h=e.Vec3,g=e.Component},function(e){v=e.RiverTile}],execute:function(){var T,p,m,D,b,j,P,y,w,C,N;o._RF.push({},"7f3b13wghtEeKDSEjEFUg0B","RiverMgr",void 0);var O=l.ccclass,_=l.property;e("RiverMgr",(T=O("RiverMgr"),p=_({type:n}),m=_({type:n}),D=_({type:n}),b=_({type:n}),T((y=i((P=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return i=e.call.apply(e,[this].concat(o))||this,r(i,"riverTilePrefab0",y,s(i)),r(i,"riverTilePrefab1",w,s(i)),r(i,"riverTilePrefab2",C,s(i)),r(i,"riverTilePrefab3",N,s(i)),i.riverTilePrefabs=void 0,i._frames=[[],[],[],[]],i.widths=[49,66,49,66],i.heights=[74,61,74,61],i.effHeights=[55.5,42.4,55.5,42.4],i.justDiscardedTileOffset=9,i.justDiscardedTileNode=null,i.justDiscardedDirection=0,i}t(i,e);var o=i.prototype;return o.onLoad=function(){var e=this;a.load("textures/tiles/small0",d,(function(i,t){for(var r=0;r<40;++r){var s=t.getSpriteFrame("tile_"+String(r));e._frames[0].push(s)}})),a.load("textures/tiles/small1",d,(function(i,t){for(var r=0;r<40;++r){var s=t.getSpriteFrame("tile_"+String(r));e._frames[1].push(s)}})),this.riverTilePrefabs=[this.riverTilePrefab0,this.riverTilePrefab1,this.riverTilePrefab2,this.riverTilePrefab3]},o.start=function(){},o.update=function(e){},o.initRiver=function(){this.node.getChildByName("myself").removeAllChildren(),this.node.getChildByName("right").removeAllChildren()},o.newRiverTile=function(e,i){var t;if(0===i)t=this.node.getChildByName("myself");else{if(1!==i)return;t=this.node.getChildByName("right")}var r=c(this.riverTilePrefabs[i]);r.getComponent(v).tileCode=e;var s=Math.floor(e/4/9),o=Math.floor(e/4)%9+1;5==o&&s<3&&e%4==0&&(o=0);var l=this._frames[i][10*s+o];r.getComponent(u).spriteFrame=l;var n=t.children.length,a=Math.floor(n/6),d=n%6;return a>=3&&(d+=6*(a-2),a=2),r.getComponent(v).row=a,r.getComponent(v).col=d,0===i?t.addChild(r):1===i?t.insertChild(r,6*a):2===i&&t.insertChild(r,0),console.log("new river tile node's sibling index",r.getSiblingIndex()),r},o.discardTile=function(e,i){var t=this.widths[i],r=this.heights[i],s=this.effHeights[i];if(this.justDiscardedDirection=i,0===i){var o=this.newRiverTile(e,i);this.justDiscardedTileNode=o;var l=o.getComponent(v).row,n=o.getComponent(v).col;o.setPosition(t*n+this.justDiscardedTileOffset,-180);f().target(o).to(.2,{position:new h(t*n+this.justDiscardedTileOffset,-1*(s*l+this.justDiscardedTileOffset))},{easing:"sineOut"}).call((function(){setTimeout((function(){globalThis._msgProcessor.dequeueAndProcessNextMsg()}),250)})).start()}else if(1===i){var a=this.newRiverTile(e,i);this.justDiscardedTileNode=a;var d=a.getComponent(v).row,c=a.getComponent(v).col;a.setPosition(180,s*c+s-r+this.justDiscardedTileOffset);f().target(a).to(.2,{position:new h(t*d+this.justDiscardedTileOffset,s*c+s-r+this.justDiscardedTileOffset)},{easing:"sineOut"}).call((function(){setTimeout((function(){globalThis._msgProcessor.dequeueAndProcessNextMsg()}),250)})).start()}else globalThis._msgProcessor.dequeueAndProcessNextMsg()},o.passDiscardedTile=function(){if(this.justDiscardedTileNode){var e;0===this.justDiscardedDirection?e=new h(-this.justDiscardedTileOffset,this.justDiscardedTileOffset):1===this.justDiscardedDirection&&(e=new h(-this.justDiscardedTileOffset,-this.justDiscardedTileOffset)),console.log("direction",this.justDiscardedDirection,"'s tile passed");f().target(this.justDiscardedTileNode).by(.15,{position:e}).start();this.justDiscardedTileNode=null}else console.error("no just discarded tile")},o.removeDiscardedTile=function(){this.justDiscardedTileNode?(this.justDiscardedTileNode.removeFromParent(),this.justDiscardedTileNode.destroy(),this.justDiscardedTileNode=null):console.error("no just discarded tile")},i}(g)).prototype,"riverTilePrefab0",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=i(P.prototype,"riverTilePrefab1",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(P.prototype,"riverTilePrefab2",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(P.prototype,"riverTilePrefab3",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=P))||j));o._RF.pop()}}}));

System.register("chunks:///_virtual/RiverTile.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,i,n,o,c,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,l=e.Component}],execute:function(){var a,u,s;o._RF.push({},"b1440dyNWNHdJ2vRp9HcGRD","RiverTile",void 0);var p=c.ccclass,f=c.property;e("RiverTile",p("RiverTile")((s=r((u=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return r=e.call.apply(e,[this].concat(o))||this,i(r,"tileCode",s,n(r)),r.row=0,r.col=0,r}t(r,e);var o=r.prototype;return o.start=function(){},o.update=function(e){},r}(l)).prototype,"tileCode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),a=u))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/UserMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var e,t,n,o;return{setters:[function(r){e=r.inheritsLoose},function(r){t=r.cclegacy,n=r._decorator,o=r.Component}],execute:function(){var a;t._RF.push({},"307b3ZYU8VLc4Zyp61vP6bA","UserMgr",void 0);var c=n.ccclass;n.property,r("UserMgr",c("UserMgr")(a=function(r){function t(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))||this).playerName=void 0,e.playerTeam=void 0,e}e(t,r);var n=t.prototype;return n.onLogin=function(r){this.playerName=r.name,this.playerTeam=r.team},n.start=function(){},n.update=function(r){},t}(o))||a);t._RF.pop()}}}));
